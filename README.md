# HW 1
Jinwoong Huh
A15569819

- Password for "grader": cse135jwh
- SSH key passphrase: cse135jwh
- SSH key: 
    ```bash
    -----BEGIN OPENSSH PRIVATE KEY-----
    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
    0tkSuohnwMHV/wJOFEa23o9bGRY=
    -----END OPENSSH PRIVATE KEY-----



## Github Deployment
I used Github hooks as shown in the homework description, in order to set up my deployment from Github to Digital Ocean. I already had my Github repo set up, and I decided to keep it simple. First, I created a directory in the server `sudo mkdir -p /var/repo/jwhuh-site.git`

Then I initialized git by `cd /var/repo` `git clone --bare git@github.com:j2huh/cse135-site.git jwhuh-site.git`, cloning my Github repository.

After that, I went into the hooks directory by `cd hooks` and created the server side hook by adding this: 
```
#!/bin/sh
git --work-tree=/var/www/jwhuh.site/public_html --git-dir=/var/repo/jwhuh-site.git checkout -f main
```
Using  `sudo nano post-receive`. I then made it executable with the command `sudo chmod +x post-receive`

Back on my local machine, I added a new remote for the live server by setting up
`git remote add prod ssh://j2huh@jwhuh.site/var/repo/jwhuh-site.git`

Finally, when I commit some changes and use `git push prod main`, it updated on the live server. 

To upload to Github repository instead of server: `git push origin main`

## Employ password protection

### Login information:
- username: grader, password: cse135jwh
- username: j2huh, password: cse135jwh

## Compress Textual Content

I noticed that before doing anything to install or configure mod_deflate to compress pages, my Content-Encoding was already gzip for HTML and CSS files. 
So after a check, I found out that it was already enabled. 
```
j2huh@cse135-j2huh:~$ sudo a2enmod deflate
[sudo] password for j2huh: 
Considering dependency filter for deflate:
Module filter already enabled
Module deflate already enabled
```

However, for good measures, I added a mod_deflate configuration block in 000-jwhuh.site-le-ssl.conf 
```
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE application/javascript
</IfModule>
```
After confirming `mod_deflate` was enabled (`apache2ctl -M | grep deflate`), I checked the Network tab in Chrome DevTools.

To see the compressed difference, I had to pad the `script.js` with dummy code, since I noticed that a file too small wouldn't have the `Content-encoding` header. So I had to make the size of `script.js` bigger to actually see the encoding.  

**What I observed:**
- `index.html`, `styles.css`,  `script.js` shows `Content-Encoding: gzip` in the Response Headers.
- The "Transferred" size is smaller than the original content.
- Example: The padded `script.js` content size was 9.3 KB, but transferred over the network as 0.5 KB.
- This indicates Apache compressed the HTML/CSS/JS before sending it, reducing bandwidth usage and improving load time.

## Obscure server identity

To meet the requirement of changing the `Server` HTTP response header to `CSE135 Server`, I installed and configured `mod_security2` for Apache.

**Steps taken:**
1. Installed the module:
   ```bash
   sudo apt-get install libapache2-mod-security2

2. Edited `/etc/apache2/apache2.conf` to include:

    ```bash
    <IfModule security2_module>
        SecRuleEngine On
        ServerTokens Min
        SecServerSignature "CSE135 Server"
    </IfModule>

3. Restarted Apache 

    ```bash
    sudo service apache2 restart

And then I confirmed that `Server: CSE135 Server appeared in the HTTP response.

